# vk Instance

实例是应用程序与`Vulkan Library`之间沟通的桥梁；
`Vulkan API`使用`vkInstance`对象来存储所有每个应用程序的状态；

# Validation Layer

`Vulkan API`的设计核心是尽量最小化驱动程序的额外开销，所谓额外开销更多的是指渲染以外的运算，其中一个具体的表现就是默认条件下，`Vulkan API`的错误检查的支持非常有限；
即使遍历不正确的值或者将需要的参数传递为空指针，也不会有明确的处理逻辑，并且直接导致崩溃或者未定义的异常行为；

`Vulkan`推出了一个优化的系统，这个系统称之为`Validation layers`，`Validation layers`是可选组件，可以挂载到`Vulkan`函数中调用，以回调其他的操作；

功能有：
1. **错误检测**：验证层可以帮助开发者检测程序中的错误。例如，当你使用不正确的参数调用Vulkan函数时，验证层会生成一个错误消息，告诉你哪里出了问题。这可以帮助你更快地找到并修复错误。  
  
2. **性能警告**：验证层还可以检测潜在的性能问题。例如，当你使用低效的渲染路径时，验证层可能会生成一个警告消息，建议你使用更高效的方法。这可以帮助你优化程序的性能。  
  
3. **规范一致性**：验证层可以确保你的程序遵循Vulkan规范。这意味着你的程序在不同的硬件和驱动程序上更有可能正常工作。  
  
4. **调试支持**：验证层可以与调试器一起使用，以提供更详细的调试信息。例如，当你在调试器中设置一个断点时，验证层可以显示与当前Vulkan命令相关的所有参数和状态。这可以帮助你更容易地理解程序的运行情况。

要在Vulkan程序中启用验证层，你需要在创建`VkInstance`时指定所需的验证层；

验证层会造成性能上的损失，因此一般在发布版本中禁用Validation Layer；

# Window Surface

Vulkan是一个与平台特性无关联的API集合，它不能直接与窗口系统进行交互，为了将渲染结果呈现到屏幕，需要建立Vulkan与窗口系统之间的连接；
简单来说，`Window Surface`就是Vulkan与窗口系统之间的桥梁；

`VkSurfaceKHR`是Window Surface的一个抽象类型，使用该类型需要拓展`VK_KHR_Surface`的支持（该拓展已在`glfwGetRequiredInstanceExtensions`中获取）；

# Queue Family

队列族是一组具有相似特性的队列，这些队列可以执行各种类型的操作，如图形渲染、计算任务和数据传输。每个队列族都有一个或多个队列，这些队列可以**并行执行**任务。  
  
Vulkan设备（如GPU）上的不同队列族可能**具有不同的性能特征和功能**。例如，某些队列族可能专门用于图形渲染，而其他队列族可能更适合执行计算任务。在Vulkan应用程序中，开发人员需要根据任务的需求选择合适的队列族。

队列族**可能同时支持多种操作**，例如，一个队列族可能既支持图形渲染操作，也支持计算操作；

队列族的种类有：
1. **图形（Graphics）队列族**：这些队列族用于执行图形渲染操作，例如绘制三维场景。要检查一个队列族是否支持图形操作，可以检查其是否具有`VK_QUEUE_GRAPHICS_BIT`标志。  
  
2. **计算（Compute）队列族**：这些队列族专门用于执行计算任务，例如在GPU上运行计算着色器。要检查一个队列族是否支持计算操作，可以检查其是否具有`VK_QUEUE_COMPUTE_BIT`标志。  
  
3. **传输（Transfer）队列族**：这些队列族用于执行数据传输操作，例如从CPU内存复制数据到GPU内存。要检查一个队列族是否支持传输操作，可以检查其是否具有`VK_QUEUE_TRANSFER_BIT`标志。
  
4. **稀疏绑定（Sparse Binding）队列族**：这些队列族用于处理稀疏资源绑定操作，例如在使用稀疏纹理时。要检查一个队列族是否支持稀疏绑定操作，可以检查其是否具有`VK_QUEUE_SPARSE_BINDING_BIT`标志。  
  
5. **保护（Protected）队列族**：这些队列族用于执行受保护的操作，例如在使用受保护的内存时。要检查一个队列族是否支持保护操作，可以检查其是否具有`VK_QUEUE_PROTECTED_BIT`标志。

---
6. **呈现（Present）队列族**：呈现队列**不是一个独立的队列族类型**，而是与其他队列族（如图形队列族）**共享的功能**，作为一种特殊类型的队列，其功能是将渲染好的图像显示到屏幕上。呈现队列通常与图形队列（Graphics Queue）一起使用，以实现图形渲染和显示的完整流程；一般支持Graphic的队列族都支持Present；

# 模型表示方法

## 参数曲面 Parametric Surface

![curve|300](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006130833.png)

## 网格 Mesh

可以是三角形、四边形、五边形，最终渲染时都会转换为三角形；

![mesh|400](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006130919.png)

## 点云 Point Cloud

![pointCloud|400](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006131028.png)

## 神经辐射场 NeRf

![Nerf|500](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006131739.png)


神经辐射场（`NeRF`）是一种用于3D场景表示的深度学习方法，它使用一个全连接的神经网络来表示一个连续的3D场景，给定一个3D坐标和一个视角，`NeRF`可以预测该位置的颜色和密度；

# 网格模型

## 着色

![UV|800](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006132826.png)

## 基本概念

### 连接关系

网格模型通常由顶点（`Vertices`，V）、边（`Edges`，E）和面（`Faces`，F）组成；

#### 欧拉-庞克来公式

$$
v-e+f=2s-2g-h
$$
其中：
- v 是顶点的数量
- e 是边的数量
- f 是面的数量
- s 是多面体的连通分量数量
- g 是多面体的亏格数量
- h 是多面体的空洞数量

#### 连通数

在网格模型中，连通数（`Connectivity`）通常指的是网格模型的连通分量的数量。一个连通分量是指一个子网格，其中任意两个顶点都存在一条路径相连，而且这个子网格不能通过添加更多的顶点来扩展；

![connectivity|200](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006135558.png)

#### 亏格

在网格模型中，亏格（`Genus`）是一个描述模型拓扑复杂性的重要参数，亏格可以被理解为模型中“洞”的数量；
更准确地说，对于一个连通、封闭的三维网格模型，其亏格定义为模型可以被变形为的无自交的环面的数量。例如，一个球体模型的亏格为0，因为它没有洞；一个圆环或者咖啡杯模型的亏格为1，因为它有一个洞；一个双环面模型的亏格为2，因为它有两个洞；

![genus|200](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006135911.png)

#### 洞数

![hole|200](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006211103.png)

### 拓扑

#### 流形与非流形

流形（`Manifold`）和非流形（`Non-Manifold`）是描述网格模型拓扑性质的重要概念；

一个网格模型被称为流形，则它满足以下两个条件：
1. 每个边都恰好被两个面共享。
2. 在每个顶点的邻域内，网格可以被连续地展开到一个二维平面。

如果一个网格模型不满足以上条件，那么它就被称为非流形；非流形的情况包括但不限于：
- 一个边被三个或更多的面共享。
- 在一个顶点的邻域内，网格不能被连续地展开到一个二维平面，例如顶点连接的面在3D空间中形成了一个T形结构。

在许多计算机图形学的应用中，流形网格是被偏好的，因为它们的拓扑结构更简单，更易于处理；
然而非流形网格在一些特定的应用中也是有用的，例如表示一些复杂的三维形状或者物理现象；

![Manifold|500](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006134707.png)

### 数据结构

#### 半边结构

半边数据结构（`Half-Edge Data Structure`）是一种常用于表示二维和三维网格模型的数据结构，特别适合于表示和操作拓扑复杂的模型；

在半边数据结构中，每条边被分为两个半边，每个半边都有一个起点和一个终点。每个半边都知道它的对偶半边（即同一条边的另一半），以及它的下一个和前一个半边（即在同一面上的相邻半边）。此外，每个半边还知道它所属的面，以及它的起点顶点；

这种数据结构的优点是它可以方便地访问一个顶点、边或面的所有邻居，这在许多网格操作中都非常有用，例如网格遍历、网格剖分、网格平滑等。同时，半边数据结构也支持模型的拓扑修改，例如添加或删除顶点、边或面；

# 模型简化

## 保纹理的减面

只简化模型和uv贴图，不修改纹理贴图；

纹理贴图保持不变：

![simplify|200](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006214443.png)

模型和uv贴图进行简化：

![simplify|550](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006214547.png)



主流算法有如下：

![simplify|700](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006214337.png)

### 算法要求

- 输入：2D/3D网格模型，UV贴图 + 面数削减比例；
- 输出：减面后的2D/3D网格模型和UV贴图；

要求：
1. 保持拓扑结构；
2. 无自相交；
3. 保持顶点之间的距离；
4. ...

### 简化框架

- 简化操作单元的误差计算；
- 构建操作单元的优先队列；
- 当队列不为空且不满足推出条件时：
	1. 取出队列中的第一个操作单元；
	2. 针对操作单元的有效性进行检查；
	3. 若不通过检查，continue；
	4. 更新邻居单元的计算误差，并加入优先队列；

#### 简化操作单元

一、移除点型

![simplify|400](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006231657.png)

二、移除边型

![simplify|350](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006231738.png)

三、移除邻近点型

![simplify|350](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006231815.png)

#### 简化误差计算

##### 几何误差

###### Housdroff距离

###### QEM


##### 视觉误差



## 不保纹理的减面

对模型的网格进行重新构造，得到完全不同的uv，需要新的纹理贴图来匹配；

![simplify|650](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006214722.png)

主流算法有如下：

![simplify|700](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006214838.png)

### 展UV

![simplify|500](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006220012.png)

![simplify|700](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006220107.png)

### 纹理烘焙

![simplify|700](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20231006220252.png)



`Precomputed Radiance Transfer` (`PRT`) 是一种计算机图形学中的技术，用于预计算复杂光照模型的影响，以便在实时渲染中快速应用；这种技术特别适用于处理全局光照效果，如阴影、反射和折射等；

`PRT` 的主要思想是预先计算和存储场景中每个点的光照响应，然后在实时渲染时，通过查找和插值这些预计算的数据来得到最终的光照效果，这样可以大大减少实时渲染时的计算量，从而提高渲染速度；

`PRT` 的一个主要挑战是如何有效地存储和查找预计算的数据，为了解决这个问题，研究者们提出了许多不同的方法，如球谐函数、波前编码和压缩纹理等；

# 基础知识

## 基函数 Basis Functions

在一个向量空间中，基函数是**一组线性无关的函数**，任何在该空间中的函数都可以表示为这组基函数的线性组合；

$$
f(x)=\sum_i c_i \cdot B_i(x)
$$


## 球谐函数 Spherical Harmonics

一组定义在球面上的2D的基函数；

球谐函数是拉普拉斯方程在球坐标系下的解，可以看作是圆谐函数（即复指数函数）在三维空间的推广；它们在球面上形成了一组完备的正交基，**任何定义在球面上的函数都可以表示为球谐函数的线性组合**；

球谐函数的一个重要应用是在计算机图形学中模拟光照和阴影，通过将环境光照表示为球谐函数的线性组合，可以有效地计算物体在复杂光照环境下的渲染效果；

![SH|500](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20230902041615.png)

球谐函数的一些特性：
1. 第 $l$ 阶具有 $2l+1$ 种形态，并且编号从左到右分别是 $-l$  到 $l$ ；
2. 每个球谐函数由勒让德多项式（`Legendre Polynomials`）表示；
3. 阶越高，对应的频率越高；
4. 颜色表示值，越偏白的地方绝对值越大，黄色和蓝色的中心处值为0；

使用球谐函数，可以**只使用前n阶的系数（低频部分）来大致描述一个球面上的函数**；

$$
c_i=\int_{\Omega}f(\omega)B_i(\omega)d\omega
$$

# Diffuse物体的着色

![diffuse|500](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20230903005922.png)

对Diffuse物体来说，对模糊后的环境贴图的一次采样，等价于，对原图的一个区域内的采样；
也就是说，**Diffuse物体剔除了环境贴图的高频部分，相当于一个低通滤波器**；


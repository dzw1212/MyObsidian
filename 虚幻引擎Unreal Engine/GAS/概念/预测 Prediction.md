
1. **客户端预测**：在多人游戏中，为了减少网络延迟带来的影响，客户端会尝试预测服务器的响应。在GAS中，这意味着客户端可以在没有服务器直接响应的情况下，开始激活`Gameplay Abilities`（游戏能力）和应用`Gameplay Effects`（游戏效果）。

2. **激活与应用**：客户端预测它可以激活某个能力，并对目标应用效果。这是基于客户端对游戏状态的理解和预测。

3. **服务器的确认与回滚**：一旦客户端做出预测并执行操作后，这些操作会被发送到服务器。服务器在接收到客户端的操作后，会在自己的系统中执行相同的操作。如果服务器的执行结果和客户端的预测一致，那么游戏状态就保持同步。如果不一致，服务器会通知客户端，客户端必须回滚或撤销之前的预测错误的操作，以确保客户端和服务器状态的一致性。


![500](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20250301161413.png)

# 预测键 Prediction Key

`PredictionKey` 是虚幻引擎网络预测系统中用于标识客户端预测操作的唯一标识符。每当客户端执行一个需要预测的操作（例如角色移动、技能释放、攻击动作等），客户端会生成一个 `PredictionKey` 并将其与该操作绑定。随后客户端会立即执行该操作的本地预测（`Local Prediction`），同时将该 `PredictionKey` 与操作请求发送给服务器。

服务器收到请求后，会执行相同的操作逻辑，并将结果连同 `PredictionKey` 一起返回给客户端。客户端收到服务器的响应后，通过 `PredictionKey` 来匹配之前的预测操作，从而判断预测是否正确，并在必要时进行校正（`Correction`）。

![700](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20250301161928.png)

![700](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20250301164940.png)


# 预测窗口 Prediction Window

`PredictionWindow`是用于管理客户端预测操作有效期的机制，它定义了客户端预测操作的有效时间范围或有效帧数范围，超过该范围的预测操作将被视为无效或过期。

`PredictionWindow` 通常用于限制客户端预测的数量和时间，避免客户端预测过多操作导致服务器负载过高或客户端与服务器状态严重不同步。

![600](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20250301164313.png)

![900](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20250301164602.png)



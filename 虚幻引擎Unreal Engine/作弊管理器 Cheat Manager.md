**作弊管理器（Cheat Manager）** 是一个专门用于游戏开发、调试和测试的内置系统。它并不是为了让玩家在最终游戏中“开挂”，而是为开发者提供的一套**快捷工具集**。

![600](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20251222012031.png)

![1000](https://pic-1315225359.cos.ap-shanghai.myqcloud.com/20251222012113.png)


以下是关于作弊管理器的详细拆解：

---

### 1. 它是什么？（核心定义）
`UCheatManager` 是虚幻引擎中的一个基类。它本质上是一个 **“调试命令的集合容器”**。
*   它关联在 `APlayerController`（玩家控制器）上。
*   它的主要作用是让开发者能够通过**控制台（Console）**快速输入指令，来跳过某些游戏流程或改变游戏状态（例如：瞬间回满血、飞天、获得所有武器等）。

### 2. 它是如何工作的？
*   **实例化：** 默认情况下，`APlayerController` 会在非发布版本（Non-Shipping Builds）中自动创建一个 `CheatManager` 实例。
*   **Exec 函数：** 作弊管理器中的功能通常被标记为 `Exec` 函数。在 C++ 中是 `UFUNCTION(Exec)`。这些函数可以直接在游戏的控制台（按 `~` 键）中输入函数名来触发。
*   **权限限制：** 这是最重要的一点——**在正式发布的“发行版（Shipping Build）”中，作弊管理器默认是不会被实例化的**。这意味着玩家在正式版游戏中按 `~` 输入这些指令通常是无效的。

### 3. 内置的常见作弊指令
虚幻引擎自带了一些基础的作弊功能，你无需编写代码即可使用（只要你的 PlayerController 启用了 CheatManager）：

*   **`God`**：开启无敌模式。
*   **`Ghost`**：穿墙模式（取消碰撞并允许飞行）。
*   **`Fly`**：飞行模式。
*   **`Walk`**：取消飞行/穿墙，回到地面行走。
*   **`Teleport`**：瞬间移动到准星指向的位置。
*   **`Slomo [倍率]`**：改变游戏运行速度（如 `Slomo 0.5` 是慢动作）。
*   **`DamageTarget [数值]`**：对当前准星所指的目标造成伤害。

### 4. 如何创建自定义作弊管理器？
开发者通常会通过继承 `UCheatManager` 来实现自己游戏的专属调试功能。

**步骤如下：**
1.  **新建类：** 创建一个继承自 `UCheatManager` 的 C++ 类或蓝图类。
2.  **编写功能：** 
    *   C++ 中：定义一个 `UFUNCTION(Exec) void MyCustomCheat();`。
    *   蓝图中：直接添加自定义事件。
3.  **指定类：** 在你的 `PlayerController` 的默认设置中，将 `Cheat Class` 设置为你自己创建的类。
4.  **调用：** 运行游戏，按 `~` 键，输入 `MyCustomCheat` 即可运行。

**示例场景：**
*   如果你在做一款 RPG，你可以写一个 `AddGold 99999` 的作弊码，方便测试商店购买功能。
*   如果你在做关卡设计，可以写一个 `UnlockAllLevels`。

### 5. 为什么开发者需要它？（应用场景）

1.  **加速 QA 测试：** 测试人员不需要玩 2 小时才去测试最终关卡的 Boss，直接输入作弊码跳过前置任务。
2.  **环境调试：** 配合我们之前提到的 `ToggleDrawRuntimeHash3d` 等命令，观察底层渲染或逻辑状态。
3.  **复现 Bug：** 通过命令强制触发某种特定的逻辑状态（例如强制将天气设为“雷雨”），来检查在该状态下是否有 Bug。

### 6. 安全性与发布（重要提示）
*   **自动剔除：** 虚幻引擎的设计非常严谨。在构建项目的 **Shipping** 模式时，`APlayerController::CheatManager` 变量会被设为 `NULL`，所有标记为 `Exec` 的函数在脚本层级会被禁用。
*   **不要在 CheatManager 里写核心逻辑：** 既然它在正式版会被剔除，那么任何游戏运行必须的功能都不能写在这里。
*   **多人游戏警示：** 作弊管理器通常只在**客户端本地**有效。如果你在做一个网络游戏，本地运行 `God` 可能只会让你本地不掉血，但服务器依然会判定你死亡。对于联网游戏的调试，通常需要自定义服务器端的调试指令。

**Aim Offset（瞄准偏移）** 是一种特殊的 **混合空间（Blend Space）**，专门用于让角色的上半身（或头部、手臂）在保持下半身运动（如行走、奔跑或站立）的同时，能够向不同方向看或瞄准。

以下是关于它的详细介绍：

# 1. 核心定义

*   **本质：** 瞄准偏移是一系列**叠加型（Additive）** 动画姿势的集合。
*   **功能：** 它允许你根据两个参数（通常是**俯仰角 Pitch** 和 **偏航角 Yaw**）来混合不同的姿势，使角色能够平滑地向上、下、左、右看。
*   **叠加特性：** 与普通混合空间不同，瞄准偏移是“叠加”在当前的基础动画（如 Idle 或 Run）之上的。这意味着它不会替换原有的动画，而是给原有的骨骼旋转增加一个偏移量。

# 2. 为什么需要它？

如果没有瞄准偏移，要实现角色边跑边向左上方开火，你可能需要为每一个移动方向和每一个瞄准方向都制作一套动画（例如“向左跑且向左瞄准”、“向右跑且向上瞄准”），这会导致动画资源量爆炸。
**瞄准偏移**解决了这个问题：
*   底层动画负责腿部移动。
*   瞄准偏移负责手臂和头部的指向。

# 3. 工作原理

瞄准偏移通常由 9 个（或更多/更少）静态姿势组成：
1.  **中心 (Center)**：向前看。
2.  **左上、上、右上**。
3.  **左、右**。
4.  **左下、下、右下**。

当你移动鼠标或控制手柄时，引擎会计算出 Pitch 和 Yaw 的值，并在这些姿势之间进行线性插值，实时计算出角色当前的骨骼状态。

# 4. 关键设置：Mesh Space（网格体空间）

这是瞄准偏移最特殊的技术点。在制作对应的动画序列（Animation Sequence）时，必须在细节面板中进行如下设置，否则瞄准偏移无法正常工作：
*   **Additive Anim Type（叠加动画类型）**：设置为 `Mesh Space`（网格体空间）。
*   **Base Pose Type（基础姿势类型）**：通常设置为 `Selected animation frame`，并选择角色默认的“向前看”姿势作为参考。

**为什么要用 Mesh Space？**
普通的叠加动画通常使用 `Local Space`，这在处理手臂摆动等局部动作时很好。但瞄准需要骨骼在统一的网格空间内旋转（例如确保枪口指向始终正确），因此必须使用 `Mesh Space`。

# 5. 如何使用

1.  **创建资产：** 在内容浏览器右键 -> Animation -> **Aim Offset**。
2.  **配置坐标轴：** 设置 Horizontal Axis 为 Yaw（-90 到 90），Vertical Axis 为 Pitch（-90 到 90）。
3.  **拖入姿势：** 将对应的 9 个姿势拖入网格中。
4.  **动画蓝图 (AnimBP)：** 在 AnimGraph 中，将瞄准偏移节点连接到你的状态机输出之后。你需要计算出当前的瞄准角度（通常从 Controller 旋转量获得）并传给该节点的输入引脚。
